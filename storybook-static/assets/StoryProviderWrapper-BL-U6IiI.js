import{r as s,j as u,M as q}from"./iframe-DSSgKmXl.js";import{R as x}from"./index-DzsatpJz.js";import{c as f}from"./react-fqQoFC2C.js";function A(l={}){return f((a,n)=>({model:null,loading:!1,error:null,version:null,setModel:o=>a({model:o,error:null,version:o.version}),setLoading:o=>a({loading:o}),setError:o=>a({error:o,loading:!1}),clearModel:()=>a({model:null,error:null,version:null,loading:!1}),getLayer:o=>{const{model:e}=n();return e==null?void 0:e.layers[o]},getElement:o=>{const{model:e}=n();if(e)for(const t of Object.values(e.layers)){const r=t.elements.find(i=>i.id===o);if(r)return r}},getElementsByLayer:o=>{const{model:e}=n(),t=e==null?void 0:e.layers[o];return(t==null?void 0:t.elements)||[]},...l}))}function T(l=[],a={}){return f((n,o)=>({annotations:l,selectedElementId:null,highlightedElementId:null,loading:!1,error:null,setAnnotations:e=>n({annotations:e}),addAnnotation:e=>n(t=>({annotations:[...t.annotations,e]})),updateAnnotation:(e,t)=>n(r=>({annotations:r.annotations.map(i=>i.id===e?{...i,...t}:i)})),removeAnnotation:e=>n(t=>({annotations:t.annotations.filter(r=>r.id!==e)})),setSelectedElementId:e=>n({selectedElementId:e}),setHighlightedElementId:e=>n({highlightedElementId:e}),setLoading:e=>n({loading:e}),setError:e=>n({error:e}),reset:()=>n({annotations:[],selectedElementId:null,highlightedElementId:null,loading:!1,error:null}),getAnnotationsForElement:e=>{const{annotations:t}=o();return t.filter(r=>r.elementId===e)},getAnnotationCount:()=>o().annotations.length,getUnresolvedCount:()=>o().annotations.filter(e=>!e.resolved).length,...a}))}function F(l={},a={}){return f((n,o)=>({activeFilters:l,setFilter:(e,t)=>n(r=>({activeFilters:{...r.activeFilters,[e]:t}})),setFilters:e=>n({activeFilters:e}),clearFilters:()=>n({activeFilters:{}}),getFilter:e=>{const{activeFilters:t}=o();return t[e]},...a}))}const E=s.createContext(null);function M({children:l,modelStoreOverrides:a={},annotationStoreOverrides:n={},initialAnnotations:o=[],filterStoreOverrides:e={},initialFilters:t={}}){const r=s.useMemo(()=>({modelStore:A(a),annotationStore:T(o,n),filterStore:F(t,e)}),[a,n,o,e,t]);return u.jsx(E.Provider,{value:r,children:l})}M.__docgenInfo={description:"Provider component for stories requiring Zustand store context",methods:[],displayName:"MockStoreProvider",props:{children:{required:!0,tsType:{name:"ReactNode"},description:""},modelStoreOverrides:{required:!1,tsType:{name:"Partial",elements:[{name:"MockModelStore"}],raw:"Partial<MockModelStore>"},description:"",defaultValue:{value:"{}",computed:!1}},annotationStoreOverrides:{required:!1,tsType:{name:"Partial",elements:[{name:"MockAnnotationStore"}],raw:"Partial<MockAnnotationStore>"},description:"",defaultValue:{value:"{}",computed:!1}},initialAnnotations:{required:!1,tsType:{name:"Array",elements:[{name:"Annotation"}],raw:"Annotation[]"},description:"",defaultValue:{value:"[]",computed:!1}},filterStoreOverrides:{required:!1,tsType:{name:"Partial",elements:[{name:"MockFilterStore"}],raw:"Partial<MockFilterStore>"},description:"",defaultValue:{value:"{}",computed:!1}},initialFilters:{required:!1,tsType:{name:"MockFilterState"},description:"",defaultValue:{value:"{}",computed:!1}}}};function S(l){const{debug:a=!0}=l||{},n=new Map,o=(e,t)=>{a&&(t!==void 0?console.log(e,t):console.log(e))};return{on:(e,t)=>{n.has(e)||n.set(e,new Set),n.get(e).add(t),o(`[Mock WS] Registered handler for '${e}'`)},off:(e,t)=>{var r;t?((r=n.get(e))==null||r.delete(t),o(`[Mock WS] Removed handler for '${e}'`)):(n.delete(e),o(`[Mock WS] Removed all handlers for '${e}'`))},emit:(e,t)=>{o(`[Mock WS] Emitting '${e}' with data:`,t);const r=n.get(e);if(r){const i=[];if(r.forEach(c=>{try{c(t)}catch(d){o(`[Mock WS] Error in handler for '${e}':`,d),i.push(d instanceof Error?d:new Error(String(d)))}}),i.length>0)throw i[0]}},getHandlers:e=>n.get(e)||new Set}}const R=s.createContext(null);function y({children:l,client:a}){const n=a||S();return u.jsx(R.Provider,{value:n,children:l})}y.__docgenInfo={description:"Provider component for stories requiring WebSocket event simulation",methods:[],displayName:"MockWebSocketProvider",props:{children:{required:!0,tsType:{name:"ReactNode"},description:""},client:{required:!1,tsType:{name:"MockWebSocketClient"},description:""}}};const C=s.createContext(null);function k({model:l=null,spec:a=null,annotations:n=[],initialLoading:o=!1,initialError:e=null,children:t}){const[r,i]=s.useState(l),[c,d]=s.useState(a),[m,p]=s.useState(n),[v,h]=s.useState(o),[g,P]=s.useState(e),w=s.useMemo(()=>({model:r,spec:c,annotations:m,loading:v,error:g,setModel:i,setSpec:d,setAnnotations:p,setLoading:h,setError:P}),[r,c,m,v,g]);return u.jsx(C.Provider,{value:w,children:t})}k.__docgenInfo={description:`MockDataLoaderProvider
Provides pre-loaded data and mocked useDataLoader hook for stories

@example
<MockDataLoaderProvider
  model={createCompleteModelFixture()}
  spec={createCompleteSpecFixture()}
  annotations={createAnnotationListFixture()}
>
  <YourComponent />
</MockDataLoaderProvider>`,methods:[],displayName:"MockDataLoaderProvider",props:{model:{required:!1,tsType:{name:"union",raw:"MetaModel | null",elements:[{name:"MetaModel"},{name:"null"}]},description:"Pre-loaded MetaModel data",defaultValue:{value:"null",computed:!1}},spec:{required:!1,tsType:{name:"union",raw:"SpecDataResponse | null",elements:[{name:"SpecDataResponse"},{name:"null"}]},description:"Pre-loaded SpecDataResponse data",defaultValue:{value:"null",computed:!1}},annotations:{required:!1,tsType:{name:"Array",elements:[{name:"Annotation"}],raw:"Annotation[]"},description:"Pre-loaded annotations",defaultValue:{value:"[]",computed:!1}},initialLoading:{required:!1,tsType:{name:"boolean"},description:"Initial loading state (default: false)",defaultValue:{value:"false",computed:!1}},initialError:{required:!1,tsType:{name:"union",raw:"string | null",elements:[{name:"string"},{name:"null"}]},description:"Initial error state (default: null)",defaultValue:{value:"null",computed:!1}},children:{required:!0,tsType:{name:"ReactNode"},description:""}}};function V({children:l,initialParams:a={},initialSearch:n={},onNavigate:o,model:e=null,spec:t=null,annotations:r=[],modelStoreOverrides:i={},annotationStoreOverrides:c={},filterStoreOverrides:d={},websocketDebug:m=!1}){const p=s.useMemo(()=>S({debug:m}),[m]);return u.jsx(x,{children:u.jsx(q,{initialParams:a,initialSearch:n,onNavigate:o,children:u.jsx(k,{model:e,spec:t,annotations:r,children:u.jsx(M,{initialAnnotations:r,initialFilters:d,modelStoreOverrides:{model:e||void 0,...i},annotationStoreOverrides:{annotations:r,...c},children:u.jsx(y,{client:p,children:l})})})})})}V.__docgenInfo={description:`StoryProviderWrapper
Comprehensive provider wrapper that sets up all mock infrastructure for stories

@example
<StoryProviderWrapper
  model={createCompleteModelFixture()}
  spec={createCompleteSpecFixture()}
  annotations={createAnnotationListFixture()}
  initialParams={{ view: 'graph' }}
  initialSearch={{ layer: 'motivation' }}
>
  <YourComponent />
</StoryProviderWrapper>`,methods:[],displayName:"StoryProviderWrapper",props:{children:{required:!0,tsType:{name:"ReactNode"},description:""},initialParams:{required:!1,tsType:{name:"Record",elements:[{name:"string"},{name:"union",raw:"string | undefined",elements:[{name:"string"},{name:"undefined"}]}],raw:"Record<string, string | undefined>"},description:"Initial route params (e.g., { view: 'graph' })",defaultValue:{value:"{}",computed:!1}},initialSearch:{required:!1,tsType:{name:"Record",elements:[{name:"string"},{name:"unknown"}],raw:"Record<string, unknown>"},description:"Initial search params (e.g., { layer: 'motivation' })",defaultValue:{value:"{}",computed:!1}},onNavigate:{required:!1,tsType:{name:"signature",type:"function",raw:"(options: NavigateOptions) => void",signature:{arguments:[{type:{name:"NavigateOptions"},name:"options"}],return:{name:"void"}}},description:"Optional callback for navigation events"},model:{required:!1,tsType:{name:"union",raw:"MetaModel | null",elements:[{name:"MetaModel"},{name:"null"}]},description:"Pre-loaded MetaModel data",defaultValue:{value:"null",computed:!1}},spec:{required:!1,tsType:{name:"union",raw:"SpecDataResponse | null",elements:[{name:"SpecDataResponse"},{name:"null"}]},description:"Pre-loaded SpecDataResponse data",defaultValue:{value:"null",computed:!1}},annotations:{required:!1,tsType:{name:"Array",elements:[{name:"Annotation"}],raw:"Annotation[]"},description:"Pre-loaded annotations",defaultValue:{value:"[]",computed:!1}},modelStoreOverrides:{required:!1,tsType:{name:"signature",type:"object",raw:"{ model?: MetaModel }",signature:{properties:[{key:"model",value:{name:"MetaModel",required:!1}}]}},description:"Override model store state",defaultValue:{value:"{}",computed:!1}},annotationStoreOverrides:{required:!1,tsType:{name:"signature",type:"object",raw:"{ annotations?: Annotation[] }",signature:{properties:[{key:"annotations",value:{name:"Array",elements:[{name:"Annotation"}],raw:"Annotation[]",required:!1}}]}},description:"Override annotation store state",defaultValue:{value:"{}",computed:!1}},filterStoreOverrides:{required:!1,tsType:{name:"MockFilterState"},description:"Override filter store state",defaultValue:{value:"{}",computed:!1}},websocketDebug:{required:!1,tsType:{name:"boolean"},description:"Enable debug logging for WebSocket events",defaultValue:{value:"false",computed:!1}}}};export{V as S};

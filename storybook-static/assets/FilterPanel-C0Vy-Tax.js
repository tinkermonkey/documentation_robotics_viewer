import{r as k,j as a}from"./iframe-DSSgKmXl.js";import{B as y}from"./Button-DjdbHWkm.js";import{X as N}from"./x-BvdhAmd6.js";import{A as T,a as A,b as C,c as F}from"./AccordionTitle-Cun89kOD.js";import{c as S,u as P,a as V,g as p,r as $,t as E}from"./create-theme-BOkxhGns.js";import{L as q}from"./Label-BgBB6PcL.js";const z=S({base:"h-4 w-4 appearance-none rounded border border-gray-300 bg-gray-100 bg-[length:0.55em_0.55em] bg-center bg-no-repeat checked:border-transparent checked:bg-current checked:bg-check-icon focus:outline-none focus:ring-2 focus:ring-offset-2 dark:border-gray-600 dark:bg-gray-700 dark:checked:border-transparent dark:checked:bg-current",color:{default:"text-primary-600 focus:ring-primary-600 dark:ring-offset-gray-800 dark:focus:ring-primary-600",dark:"text-gray-800 focus:ring-gray-800 dark:ring-offset-gray-800 dark:focus:ring-gray-800",failure:"text-red-900 focus:ring-red-900 dark:ring-offset-red-900 dark:focus:ring-red-900",gray:"text-gray-900 focus:ring-gray-900 dark:ring-offset-gray-900 dark:focus:ring-gray-900",info:"text-cyan-800 focus:ring-cyan-800 dark:ring-offset-gray-800 dark:focus:ring-cyan-800",light:"text-gray-900 focus:ring-gray-900 dark:ring-offset-gray-900 dark:focus:ring-gray-900",purple:"text-purple-600 focus:ring-purple-600 dark:ring-offset-purple-600 dark:focus:ring-purple-600",success:"text-green-800 focus:ring-green-800 dark:ring-offset-green-800 dark:focus:ring-green-800",warning:"text-yellow-400 focus:ring-yellow-400 dark:ring-offset-yellow-400 dark:focus:ring-yellow-400",blue:"text-blue-700 focus:ring-blue-600 dark:ring-offset-blue-700 dark:focus:ring-blue-700",cyan:"text-cyan-600 focus:ring-cyan-600 dark:ring-offset-cyan-600 dark:focus:ring-cyan-600",green:"text-green-600 focus:ring-green-600 dark:ring-offset-green-600 dark:focus:ring-green-600",indigo:"text-indigo-700 focus:ring-indigo-700 dark:ring-offset-indigo-700 dark:focus:ring-indigo-700",lime:"text-lime-700 focus:ring-lime-700 dark:ring-offset-lime-700 dark:focus:ring-lime-700",pink:"text-pink-600 focus:ring-pink-600 dark:ring-offset-pink-600 dark:focus:ring-pink-600",red:"text-red-600 focus:ring-red-600 dark:ring-offset-red-600 dark:focus:ring-red-600",teal:"text-teal-600 focus:ring-teal-600 dark:ring-offset-teal-600 dark:focus:ring-teal-600",yellow:"text-yellow-400 focus:ring-yellow-400 dark:ring-offset-yellow-400 dark:focus:ring-yellow-400"},indeterminate:"border-transparent bg-current bg-dash-icon dark:border-transparent dark:bg-current"}),b=k.forwardRef((l,c)=>{var d,u;const n=P(),o=V([z,(d=n.theme)==null?void 0:d.checkbox,l.theme],[p(n.clearTheme,"checkbox"),l.clearTheme],[p(n.applyTheme,"checkbox"),l.applyTheme]),{className:f,color:i="default",indeterminate:g,...x}=$(l,(u=n.props)==null?void 0:u.checkbox);return a.jsx("input",{ref:c,type:"checkbox",className:E(o.base,o.color[i],g&&o.indeterminate,f),...x})});b.displayName="Checkbox";const m=({sections:l,onClearAll:c,showClearAll:n=!0,className:o=""})=>{const f=l.every(e=>e.items.every(r=>e.selectedValues.has(r.value))),i=l.reduce((e,r)=>(!r||!Array.isArray(r.items)||r.items.forEach(t=>{t&&t.count&&typeof t.count.visible=="number"&&typeof t.count.total=="number"&&(e.visible+=t.count.visible,e.total+=t.count.total)}),e),{visible:0,total:0}),g=e=>{e.items.forEach(r=>{!e.selectedValues.has(r.value)&&(!r.count||r.count.total>0)&&e.onToggle(r.value,!0)})},x=e=>{e.items.forEach(r=>{e.selectedValues.has(r.value)&&e.onToggle(r.value,!1)})},d=e=>!e||!Array.isArray(e.items)?{visible:0,total:0}:e.items.reduce((r,t)=>(t&&t.count&&typeof t.count.visible=="number"&&typeof t.count.total=="number"&&(r.visible+=t.count.visible,r.total+=t.count.total),r),{visible:0,total:0}),u=e=>e.items.filter(r=>!r.count||r.count.total>0).every(r=>e.selectedValues.has(r.value));return a.jsxs("div",{className:`space-y-4 ${o}`,"data-testid":"filter-panel",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("h3",{className:"text-sm font-semibold text-gray-900 dark:text-white",children:["Filters",i.total>0&&a.jsxs("span",{className:"ml-2 text-xs font-normal text-gray-500 dark:text-gray-400",children:["(",i.visible," / ",i.total,")"]})]}),n&&c&&a.jsxs(y,{color:"gray",size:"xs",onClick:c,disabled:f,title:"Clear all filters and show all elements","data-testid":"clear-all-filters-btn",children:[a.jsx(N,{className:"mr-1 h-3 w-3"}),"Clear All"]})]}),a.jsx(T,{collapseAll:!1,children:l.map(e=>{const r=d(e),t=u(e),v=e.selectedValues.size===0;return a.jsxs(A,{children:[a.jsx(C,{children:a.jsxs("div",{className:"flex items-center justify-between w-full pr-4",children:[a.jsx("span",{children:e.title}),r.total>0&&a.jsxs("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:[r.visible," / ",r.total]})]})}),a.jsxs(F,{children:[a.jsxs("div",{className:"flex gap-2 mb-3",children:[a.jsx(y,{size:"xs",color:"light",onClick:()=>g(e),disabled:t,"data-testid":`select-all-${e.id}`,children:"Select All"}),a.jsx(y,{size:"xs",color:"light",onClick:()=>x(e),disabled:v,"data-testid":`deselect-all-${e.id}`,children:"Deselect All"})]}),a.jsx("div",{className:"space-y-2",children:e.items.map(s=>{const j=e.selectedValues.has(s.value),h=!s.count||s.count.total>0;return a.jsxs("div",{className:"flex items-center justify-between","data-testid":`filter-item-${s.value}`,children:[a.jsx(b,{id:`filter-${e.id}-${s.value}`,checked:j,onChange:w=>e.onToggle(s.value,w.target.checked),disabled:!h}),a.jsxs(q,{htmlFor:`filter-${e.id}-${s.value}`,className:"flex items-center gap-2 flex-1 ml-2 cursor-pointer",disabled:!h,children:[s.icon&&a.jsx("span",{className:"flex-shrink-0 text-gray-500 dark:text-gray-400","aria-hidden":"true",children:s.icon}),a.jsx("span",{className:"flex-1 text-sm text-gray-700 dark:text-gray-300",children:s.label}),s.count&&a.jsxs("span",{className:"text-xs text-gray-500 dark:text-gray-400 flex-shrink-0",children:[s.count.visible,"/",s.count.total]})]})]},s.value)})})]})]},e.id)})})]})},M=k.memo(m);m.displayName="FilterPanel";m.__docgenInfo={description:"",methods:[],displayName:"FilterPanel",props:{sections:{required:!0,tsType:{name:"Array",elements:[{name:"FilterSection",elements:[{name:"T"}],raw:"FilterSection<T>"}],raw:"FilterSection<T>[]"},description:"Filter sections"},onClearAll:{required:!1,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:"Callback to clear all filters"},showClearAll:{required:!1,tsType:{name:"boolean"},description:"Show Clear All button",defaultValue:{value:"true",computed:!1}},className:{required:!1,tsType:{name:"string"},description:"Custom class name",defaultValue:{value:"''",computed:!1}}}};export{M as F};

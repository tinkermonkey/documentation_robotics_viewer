import{r as t,j as e}from"./iframe-DSSgKmXl.js";import{c as f}from"./createLucideIcon-CIvKt9yE.js";/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],j=f("send",C);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]],k=f("square",N),h=t.memo(({onSendMessage:p,onCancel:i,isStreaming:o=!1,isSending:d=!1,sdkStatus:s,disabled:y=!1,placeholder:g="Type a message...",testId:x="chat-input"})=>{const[r,c]=t.useState(""),n=t.useRef(null),l=(s==null?void 0:s.sdkAvailable)??!1,u=y||o||!l||d;t.useEffect(()=>{n.current&&(n.current.style.height="auto",n.current.style.height=`${Math.min(n.current.scrollHeight,200)}px`)},[r]);const m=t.useCallback(async()=>{if(!r.trim()||u)return;const a=r.trim();c("");try{await p(a)}catch(w){console.error("[ChatInput] Failed to send message:",w),c(a)}},[r,u,p]),b=t.useCallback(async()=>{if(i)try{await i()}catch(a){console.error("[ChatInput] Failed to cancel:",a)}},[i]),v=t.useCallback(a=>{if(a.key==="Enter"&&!a.shiftKey){a.preventDefault(),m();return}},[m]);return e.jsxs("div",{className:"px-4 py-3 border-t dark:border-gray-700","data-testid":x,children:[!l&&e.jsxs("div",{className:"bg-yellow-50 dark:bg-yellow-900 border border-yellow-200 dark:border-yellow-700 rounded p-2 mb-3 text-sm text-yellow-800 dark:text-yellow-200",children:["[Warning] ",(s==null?void 0:s.errorMessage)||"Chat service is not available"]}),e.jsxs("div",{className:"flex gap-2 items-end",children:[e.jsx("textarea",{ref:n,value:r,onChange:a=>c(a.target.value),onKeyDown:v,disabled:u,placeholder:l?g:"Chat unavailable",className:"flex-1 px-3 py-2 border rounded resize-none focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-gray-100 dark:border-gray-600 disabled:opacity-50 disabled:cursor-not-allowed overflow-hidden",style:{minHeight:"40px",maxHeight:"200px"},"data-testid":"message-input"}),e.jsx("div",{className:"flex gap-2",children:o?e.jsxs("button",{onClick:b,className:"px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700 disabled:opacity-50 text-sm font-medium transition-colors flex items-center gap-2",disabled:!o,"data-testid":"cancel-button","aria-label":"Cancel message streaming",children:[e.jsx(k,{className:"w-4 h-4"}),e.jsx("span",{children:"Cancel"})]}):e.jsxs("button",{onClick:m,disabled:!r.trim()||!l||d,className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 disabled:opacity-50 text-sm font-medium transition-colors flex items-center gap-2","data-testid":"send-button","aria-label":"Send message",children:[e.jsx(j,{className:"w-4 h-4"}),e.jsx("span",{children:d?"...":"Send"})]})})]}),e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 mt-2",children:"Press Enter to send, Shift+Enter for new line"})]})});h.displayName="ChatInput";h.__docgenInfo={description:"",methods:[],displayName:"ChatInput",props:{onSendMessage:{required:!0,tsType:{name:"signature",type:"function",raw:"(message: string) => Promise<void>",signature:{arguments:[{type:{name:"string"},name:"message"}],return:{name:"Promise",elements:[{name:"void"}],raw:"Promise<void>"}}},description:""},onCancel:{required:!1,tsType:{name:"signature",type:"function",raw:"() => Promise<void>",signature:{arguments:[],return:{name:"Promise",elements:[{name:"void"}],raw:"Promise<void>"}}},description:""},isStreaming:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},isSending:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},sdkStatus:{required:!1,tsType:{name:"union",raw:"SDKStatus | null",elements:[{name:"SDKStatus"},{name:"null"}]},description:""},disabled:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},placeholder:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:"'Type a message...'",computed:!1}},testId:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:"'chat-input'",computed:!1}}}};export{h as C};

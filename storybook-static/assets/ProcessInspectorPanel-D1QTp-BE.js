import{r as x,j as e}from"./iframe-DSSgKmXl.js";import{B as p,A as u,a as y}from"./BaseInspectorPanel-BBWNLuHC.js";import{a as g,g as f}from"./layerColors-Dv3sYeJV.js";import{c as h}from"./createLucideIcon-CIvKt9yE.js";import{B as l}from"./Badge-4uEMzFcW.js";/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],N=h("target",j);function w(t){return t==="high"?"failure":t==="medium"?"warning":"success"}function v(t){const n={process:"indigo",function:"warning",service:"purple",capability:"success"}[t.type]||"gray";return e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Name:"}),e.jsx("span",{className:"text-sm font-semibold",children:t.name})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Type:"}),e.jsx(l,{color:n,children:t.type})]}),t.description&&e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Description:"}),e.jsx("p",{className:"text-sm mt-1",children:t.description})]}),t.metadata.owner&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Owner:"}),e.jsx("span",{className:"text-sm text-gray-900 dark:text-white",children:t.metadata.owner})]}),t.metadata.criticality&&e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Criticality:"}),e.jsx(l,{color:w(t.metadata.criticality),children:t.metadata.criticality})]}),t.metadata.lifecycle&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Lifecycle:"}),e.jsx("span",{className:"text-sm text-gray-900 dark:text-white",children:t.metadata.lifecycle})]}),t.metadata.domain&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Domain:"}),e.jsx("span",{className:"text-sm text-gray-900 dark:text-white",children:t.metadata.domain})]}),t.metadata.subprocessCount&&t.metadata.subprocessCount>0&&e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Subprocesses:"}),e.jsx(l,{color:"warning",children:t.metadata.subprocessCount})]})]})}function k(t,a){const n=a.crossLayerLinks.filter(s=>s.source===t.id);if(n.length===0)return null;const i=new Map;for(const s of n){const r=i.get(s.targetLayer)||[];r.push(s),i.set(s.targetLayer,r)}return e.jsxs(e.Fragment,{children:[e.jsxs("h4",{className:"text-lg font-semibold mb-3 text-gray-900 dark:text-white",children:["Cross-Layer References (",n.length,")"]}),e.jsx("div",{className:"space-y-3",children:Array.from(i.entries()).map(([s,r])=>e.jsxs("div",{className:"border-l-2 pl-3",style:{borderColor:f(s)},children:[e.jsxs("h5",{className:"text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2",children:[g(s)," (",r.length,")"]}),e.jsx("ul",{className:"space-y-1",children:r.map(c=>e.jsx("li",{className:"text-xs",children:e.jsxs("div",{className:"flex justify-between items-center gap-1",children:[e.jsx(l,{color:"gray",size:"sm",children:c.type}),e.jsx("span",{className:"text-blue-600 dark:text-blue-400 text-xs truncate",children:c.target})]})},c.target))})]},s))})]})}function b(t,a,n){if(!t||!a)return[];const i=Array.from(a.edges.values()).filter(r=>r.target===t.id).length,s=Array.from(a.edges.values()).filter(r=>r.source===t.id).length;return[{id:"trace-upstream",title:"Trace Upstream",icon:e.jsx(u,{className:"w-4 h-4"}),onClick:()=>n.onTraceUpstream(),description:"Show all processes that lead to this process",condition:()=>i>0},{id:"trace-downstream",title:"Trace Downstream",icon:e.jsx(y,{className:"w-4 h-4"}),onClick:()=>n.onTraceDownstream(),description:"Show all processes that follow this process",condition:()=>s>0},{id:"isolate",title:"Isolate Process",icon:e.jsx(N,{className:"w-4 h-4"}),onClick:()=>n.onIsolate(),color:"blue",description:"Isolate this process to focus on it"}]}function m({selectedNode:t,businessGraph:a,onTraceUpstream:n,onTraceDownstream:i,onIsolate:s,onClose:r}){if(!t||!a)return e.jsxs("div",{className:"flex flex-col h-full bg-white dark:bg-gray-900",role:"complementary","aria-label":"Process Inspector","data-testid":"process-inspector-panel",children:[e.jsxs("div",{className:"flex justify-between items-center p-4 border-b dark:border-gray-700",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Inspector"}),r&&e.jsx("button",{onClick:r,className:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200","data-testid":"process-inspector-close","aria-label":"Close inspector",children:"âœ•"})]}),e.jsx("div",{className:"flex-1 flex items-center justify-center p-4",children:e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"No element selected"})})]});const c=t.id,d=b(t,a,{onTraceUpstream:n,onTraceDownstream:i,onIsolate:s});return e.jsx(p,{selectedNodeId:c,graph:a,onClose:r??(()=>{}),renderElementDetails:v,getNodeName:o=>o.name,getEdgeType:o=>o.type,renderCrossLayerLinks:o=>k(o,a),quickActions:d,title:"Inspector",testId:"process-inspector-panel"})}const C=x.memo(m);C.displayName="ProcessInspectorPanel";m.__docgenInfo={description:"ProcessInspectorPanel Component",methods:[],displayName:"ProcessInspectorPanelComponent",props:{selectedNode:{required:!0,tsType:{name:"union",raw:"BusinessNode | null",elements:[{name:"BusinessNode"},{name:"null"}]},description:""},businessGraph:{required:!0,tsType:{name:"union",raw:"BusinessGraph | null",elements:[{name:"BusinessGraph"},{name:"null"}]},description:""},onTraceUpstream:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},onTraceDownstream:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},onIsolate:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},onNavigateToCrossLayer:{required:!1,tsType:{name:"signature",type:"function",raw:"(layer: string, elementId: string) => void",signature:{arguments:[{type:{name:"string"},name:"layer"},{type:{name:"string"},name:"elementId"}],return:{name:"void"}}},description:""},onClose:{required:!1,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""}}};export{C as P};

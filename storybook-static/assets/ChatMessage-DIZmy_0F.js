var V=Object.defineProperty;var W=(n,e,t)=>e in n?V(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var d=(n,e,t)=>W(n,typeof e!="symbol"?e+"":e,t);import{r as b,j as r,R as $}from"./iframe-DSSgKmXl.js";import{c as F}from"./react-fqQoFC2C.js";import{_ as q}from"./preload-helper-Dp1pzeXC.js";import{l as u,E as m,a as _}from"./errorTracker-DrR4A8t3.js";import{C as H}from"./ChatTextContent-D1MHf8Qj.js";import{T as G}from"./ThinkingBlock-Dm6mq9Ve.js";import{T as J}from"./ToolInvocationCard-DbyYmtTK.js";import{U as B}from"./UsageStatsBadge-D6eWC_K7.js";import{C as X}from"./ChatInput-DKttK8bN.js";import{c as O}from"./createLucideIcon-CIvKt9yE.js";/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K=[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]],z=O("bot",K);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],Q=O("user",Y);class i extends Error{constructor(e,t,s){super(t),this.code=e,this.context=s,this.name="ChatValidationError"}}function C(n){if(typeof n!="string"||n.trim().length===0)throw new i("INVALID_MESSAGE_ID","Message ID must be a non-empty string",{id:n})}function j(n){if(!n||typeof n!="object")throw new i("INVALID_CONTENT","Content must be an object",{content:n});const e=n,t=e.type;if(typeof t!="string")throw new i("INVALID_CONTENT_TYPE","Content must have a type field that is a string",{type:t});if(typeof e.timestamp!="string")throw new i("MISSING_TIMESTAMP","Content must have a timestamp field",{timestamp:e.timestamp});switch(t){case"text":{if(typeof e.content!="string")throw new i("INVALID_TEXT_CONTENT","Text content must have a content field that is a string",{content:e.content});break}case"tool_invocation":{if(typeof e.toolUseId!="string"||e.toolUseId.length===0)throw new i("INVALID_TOOL_USE_ID","Tool invocation must have a non-empty toolUseId",{toolUseId:e.toolUseId});if(typeof e.toolName!="string")throw new i("INVALID_TOOL_NAME","Tool invocation must have a toolName field",{toolName:e.toolName});if(!e.toolInput||typeof e.toolInput!="object")throw new i("INVALID_TOOL_INPUT","Tool invocation must have a toolInput field",{toolInput:e.toolInput});if(!e.status||typeof e.status!="object")throw new i("INVALID_TOOL_STATUS","Tool invocation must have a status field",{status:e.status});break}case"thinking":{if(typeof e.content!="string")throw new i("INVALID_THINKING_CONTENT","Thinking content must have a content field that is a string",{content:e.content});break}case"usage":{if(typeof e.inputTokens!="number")throw new i("INVALID_USAGE","Usage content must have an inputTokens field that is a number",{inputTokens:e.inputTokens});if(typeof e.outputTokens!="number")throw new i("INVALID_USAGE","Usage content must have an outputTokens field that is a number",{outputTokens:e.outputTokens});if(typeof e.totalTokens!="number")throw new i("INVALID_USAGE","Usage content must have a totalTokens field that is a number",{totalTokens:e.totalTokens});if(typeof e.totalCostUsd!="number")throw new i("INVALID_USAGE","Usage content must have a totalCostUsd field that is a number",{totalCostUsd:e.totalCostUsd});break}case"error":{if(typeof e.code!="string")throw new i("INVALID_ERROR","Error content must have a code field that is a string",{code:e.code});if(typeof e.message!="string")throw new i("INVALID_ERROR","Error content must have a message field that is a string",{message:e.message});break}default:throw new i("UNKNOWN_CONTENT_TYPE",`Unknown content type: ${t}. Must be one of: text, tool_invocation, thinking, usage, error`,{type:t})}}function Z(n){if(!n||typeof n!="object")throw new i("INVALID_MESSAGE","Message must be an object",{message:n});const e=n;if(typeof e.id!="string"||e.id.length===0)throw new i("INVALID_MESSAGE_ID","Message must have a non-empty id field",{id:e.id});if(typeof e.role!="string")throw new i("INVALID_ROLE","Message must have a role field that is a string",{role:e.role});const t=["user","assistant","system"];if(!t.includes(e.role))throw new i("INVALID_ROLE_VALUE",`Role must be one of: ${t.join(", ")}`,{role:e.role});if(typeof e.conversationId!="string"||e.conversationId.length===0)throw new i("INVALID_CONVERSATION_ID","Message must have a non-empty conversationId field",{conversationId:e.conversationId});if(typeof e.timestamp!="string"||e.timestamp.length===0)throw new i("INVALID_TIMESTAMP","Message must have a non-empty timestamp field",{timestamp:e.timestamp});if(!Array.isArray(e.parts))throw new i("INVALID_PARTS","Message must have a parts field that is an array",{parts:e.parts});for(let s=0;s<e.parts.length;s++)try{j(e.parts[s])}catch(o){throw o instanceof i?new i(o.code,`Invalid content at parts[${s}]: ${o.message}`,{...o.context,partIndex:s}):o}if(e.isStreaming!==void 0&&typeof e.isStreaming!="boolean")throw new i("INVALID_STREAMING_FLAG","isStreaming must be a boolean",{isStreaming:e.isStreaming})}function ee(n){if(!n||typeof n!="object")throw new i("INVALID_SDK_STATUS","SDK status must be an object",{status:n});const e=n;if(typeof e.sdkAvailable!="boolean")throw new i("INVALID_SDK_AVAILABLE","sdkAvailable must be a boolean",{sdkAvailable:e.sdkAvailable});if(e.sdkVersion!==null&&typeof e.sdkVersion!="string")throw new i("INVALID_SDK_VERSION","sdkVersion must be a string or null",{sdkVersion:e.sdkVersion});if(e.errorMessage!==null&&typeof e.errorMessage!="string")throw new i("INVALID_ERROR_MESSAGE","errorMessage must be a string or null",{errorMessage:e.errorMessage})}function te(n){if(n!==null&&(typeof n!="string"||n.length===0))throw new i("INVALID_CONVERSATION_ID","Conversation ID must be a non-empty string or null",{id:n})}function se(n){if(n!==null&&typeof n!="string")throw new i("INVALID_ERROR_MESSAGE","Error message must be a string or null",{error:n})}function ne(n){if(!n||typeof n!="object")throw new i("INVALID_UPDATES","Updates must be an object",{updates:n});const e=n;if(e.id!==void 0&&(typeof e.id!="string"||e.id.length===0))throw new i("INVALID_ID_UPDATE","Updated id must be a non-empty string",{id:e.id});if(e.role!==void 0){const t=["user","assistant","system"];if(!t.includes(e.role))throw new i("INVALID_ROLE_UPDATE",`Updated role must be one of: ${t.join(", ")}`,{role:e.role})}if(e.conversationId!==void 0&&(typeof e.conversationId!="string"||e.conversationId.length===0))throw new i("INVALID_CONVERSATION_ID_UPDATE","Updated conversationId must be a non-empty string",{conversationId:e.conversationId});if(e.timestamp!==void 0&&typeof e.timestamp!="string")throw new i("INVALID_TIMESTAMP_UPDATE","Updated timestamp must be a string",{timestamp:e.timestamp});if(e.isStreaming!==void 0&&typeof e.isStreaming!="boolean")throw new i("INVALID_STREAMING_UPDATE","Updated isStreaming must be a boolean",{isStreaming:e.isStreaming});if(e.parts!==void 0)throw new i("INVALID_PARTS_UPDATE","Parts cannot be directly updated - use appendPart or appendTextContent instead",{parts:e.parts})}function re(n){if(!n||typeof n!="object")throw new i("INVALID_UPDATES","Updates must be an object",{updates:n});const e=n;if(e.toolName!==void 0&&(typeof e.toolName!="string"||e.toolName.length===0))throw new i("INVALID_TOOL_NAME","Updated toolName must be a non-empty string",{toolName:e.toolName});if(e.toolInput!==void 0&&(typeof e.toolInput!="object"||e.toolInput===null))throw new i("INVALID_TOOL_INPUT","Updated toolInput must be an object",{toolInput:e.toolInput});if(e.status!==void 0){if(typeof e.status!="object"||e.status===null)throw new i("INVALID_TOOL_STATUS","Updated status must be an object",{status:e.status});const t=e.status,s=["executing","completed","failed"];if(!s.includes(t.state))throw new i("INVALID_STATUS_STATE",`Updated status state must be one of: ${s.join(", ")}`,{state:t.state})}}const S=F((n,e)=>({messages:[],activeConversationId:null,isStreaming:!1,sdkStatus:null,error:null,setActiveConversationId:t=>{te(t),n({activeConversationId:t})},setStreaming:t=>{if(typeof t!="boolean")throw new i("INVALID_STREAMING_FLAG","isStreaming must be a boolean",{isStreaming:t});n({isStreaming:t})},setSdkStatus:t=>{t!==null&&ee(t),n({sdkStatus:t})},setError:t=>{se(t),n({error:t})},reset:()=>n({messages:[],activeConversationId:null,isStreaming:!1,sdkStatus:null,error:null}),addMessage:t=>{Z(t);const o=e();if(o.messages.length>=1e3)throw new i("MAX_MESSAGES_EXCEEDED","Cannot add message: maximum limit of 1000 messages reached",{currentCount:o.messages.length,maxLimit:1e3});o.activeConversationId&&t.conversationId!==o.activeConversationId&&console.warn(`Message conversationId "${t.conversationId}" does not match active conversationId "${o.activeConversationId}"`),n(c=>({messages:[...c.messages,t]}))},updateMessage:(t,s)=>{if(C(t),ne(s),!e().messages.some(a=>a.id===t))throw new i("MESSAGE_NOT_FOUND",`Message with id "${t}" not found`,{id:t});n(a=>({messages:a.messages.map(l=>l.id===t?{...l,...s}:l)}))},deleteMessage:t=>{C(t),n(s=>({messages:s.messages.filter(o=>o.id!==t)}))},appendPart:(t,s)=>{C(t),j(s);const a=e().messages.find(l=>l.id===t);if(!a)throw new i("MESSAGE_NOT_FOUND",`Message with id "${t}" not found`,{messageId:t});if(a.parts.length>=500)throw new i("MAX_PARTS_EXCEEDED","Cannot append part: maximum limit of 500 parts per message reached",{messageId:t,currentCount:a.parts.length,maxLimit:500});n(l=>({messages:l.messages.map(h=>{if(h.id===t){const f={...s,timestamp:s.timestamp&&s.timestamp.length>0?s.timestamp:new Date().toISOString()};return{...h,parts:[...h.parts,f]}}return h})}))},appendTextContent:(t,s)=>{if(C(t),typeof s!="string")throw new i("INVALID_TEXT_CONTENT","Content must be a string",{content:s});const a=e().messages.find(f=>f.id===t);if(!a)throw new i("MESSAGE_NOT_FOUND",`Message with id "${t}" not found`,{messageId:t});const l=a.parts[a.parts.length-1];if(!(l&&l.type==="text")&&a.parts.length>=500)throw new i("MAX_PARTS_EXCEEDED","Cannot append part: maximum limit of 500 parts per message reached",{messageId:t,currentCount:a.parts.length,maxLimit:500});n(f=>({messages:f.messages.map(g=>{if(g.id===t){const E=g.parts[g.parts.length-1];if(E&&E.type==="text"){const I=[...g.parts];return I[g.parts.length-1]={...E,content:E.content+s},{...g,parts:I}}const p={type:"text",content:s,timestamp:new Date().toISOString()};return{...g,parts:[...g.parts,p]}}return g})}))},updateToolInvocation:(t,s)=>{if(typeof t!="string"||t.length===0)throw new i("INVALID_TOOL_USE_ID","toolUseId must be a non-empty string",{toolUseId:t});re(s);const o=e();let c=!1;for(const a of o.messages){for(const l of a.parts)if(l.type==="tool_invocation"&&"toolUseId"in l&&l.toolUseId===t){c=!0;break}if(c)break}if(!c)throw new i("TOOL_NOT_FOUND",`Tool invocation with toolUseId "${t}" not found`,{toolUseId:t});n(a=>({messages:a.messages.map(l=>({...l,parts:l.parts.map(h=>h.type==="tool_invocation"&&"toolUseId"in h&&h.toolUseId===t?{...h,...s}:h)}))}))},getLastMessage:()=>{const t=e().messages;return t.length>0?t[t.length-1]:void 0},getMessagesByConversation:t=>e().messages.filter(s=>s.conversationId===t),getCurrentStreamingMessage:()=>{const t=e().messages;for(let s=t.length-1;s>=0;s--)if(t[s].isStreaming)return t[s]}}));class v extends Error{constructor(e,t,s){super(s),this.code=e,this.rpcError=t,this.name="JsonRpcErrorResult",Object.setPrototypeOf(this,v.prototype)}}class oe{constructor(){d(this,"pendingRequests",new Map);d(this,"notificationHandlers",new Map);d(this,"requestTimeout",3e4);d(this,"requestIdCounter",1);d(this,"messageListenerAttached",!1);d(this,"messageListenerAttachmentInProgress",!1);d(this,"cachedWebSocketClient",null);this.ensureMessageListenerAttached()}async getWebSocketClient(){if(this.cachedWebSocketClient)return this.cachedWebSocketClient;try{const e=await q(()=>Promise.resolve().then(()=>ue),void 0,import.meta.url);return this.cachedWebSocketClient=e.websocketClient,this.cachedWebSocketClient}catch(e){throw u(m.JSONRPC_WEBSOCKET_LOAD_FAILED,"Failed to load WebSocket client - JSON-RPC communication will not be available",{},e instanceof Error?e:new Error(String(e))),e}}async ensureMessageListenerAttachedAsync(){if(!this.messageListenerAttached&&!this.messageListenerAttachmentInProgress){this.messageListenerAttachmentInProgress=!0;try{(await this.getWebSocketClient()).on("message",t=>{try{if(!this.isValidJsonRpcMessage(t)){u(m.JSONRPC_MESSAGE_PARSE_FAILED,"Invalid JSON-RPC message structure - missing required fields",{message:String(t)});return}this.handleMessage(t)}catch(s){s instanceof TypeError?u(m.JSONRPC_MESSAGE_PARSE_FAILED,"Invalid JSON-RPC message structure",{error:s instanceof Error?s.message:String(s),message:String(t)},s instanceof Error?s:new Error(String(s))):u(m.JSONRPC_MESSAGE_HANDLER_ERROR,"Unexpected error while handling JSON-RPC message - possible programming bug",{error:s instanceof Error?s.message:String(s),errorType:s instanceof Error?s.constructor.name:typeof s,message:String(t),stack:s instanceof Error?s.stack:void 0},s instanceof Error?s:new Error(String(s)))}}),this.messageListenerAttached=!0}catch(e){u(m.JSONRPC_ATTACH_LISTENER_FAILED,"Failed to attach message listener to WebSocket - JSON-RPC responses will not be received",{error:e instanceof Error?e.message:String(e)},e instanceof Error?e:new Error(String(e)))}finally{this.messageListenerAttachmentInProgress=!1}}}ensureMessageListenerAttached(){this.messageListenerAttached||this.messageListenerAttachmentInProgress||this.ensureMessageListenerAttachedAsync().catch(e=>{u(m.JSONRPC_ATTACH_LISTENER_BACKGROUND_FAILED,"Failed to attach message listener in background",{error:e instanceof Error?e.message:String(e)})})}async sendRequest(e,t,s){const o=this.generateRequestId(),c={jsonrpc:"2.0",method:e,id:o};return t&&(c.params=t),new Promise((a,l)=>{const h=s??this.requestTimeout,f=setTimeout(()=>{this.pendingRequests.delete(o),l(new Error(`JSON-RPC request timeout for method '${e}' after ${h}ms`))},h);this.pendingRequests.set(o,{id:o,method:e,resolve:g=>a(g),reject:l,timeout:f}),this._sendRequestMessage(c,o,f,l)})}sendNotification(e,t){const s={jsonrpc:"2.0",method:e,...t&&{params:t}};this._sendNotificationMessage(s,e)}async _sendRequestMessage(e,t,s,o){try{if(!(await this.getWebSocketClient()).send(e)){this.pendingRequests.delete(t),clearTimeout(s);const l="Failed to send JSON-RPC request: WebSocket not connected";u(m.JSONRPC_SEND_REQUEST_FAILED,l,{method:e.method}),o(new Error(l))}}catch(c){this.pendingRequests.delete(t),clearTimeout(s);const a=`Failed to send JSON-RPC request: ${c instanceof Error?c.message:"Unknown error"}`;u(m.JSONRPC_SEND_REQUEST_FAILED,a,{error:c instanceof Error?c.message:String(c),method:e.method}),o(new Error(a))}}async _sendNotificationMessage(e,t){try{(await this.getWebSocketClient()).send(e)||u(m.JSONRPC_SEND_NOTIFICATION_FAILED,`Failed to send notification for method '${t}': WebSocket not connected`,{method:t})}catch(s){u(m.JSONRPC_SEND_NOTIFICATION_FAILED,`Failed to send notification for method '${t}'`,{error:s instanceof Error?s.message:String(s),method:t})}}onNotification(e,t){this.notificationHandlers.has(e)||this.notificationHandlers.set(e,new Set);const s=this.notificationHandlers.get(e);return s.add(t),()=>{s.delete(t),s.size===0&&this.notificationHandlers.delete(e)}}handleMessage(e){"result"in e||"error"in e?this.handleResponse(e):"method"in e&&!("id"in e)&&this.handleNotification(e)}handleResponse(e){const{id:t}=e,s=this.pendingRequests.get(t);if(!s){const o=`Received JSON-RPC response for unknown request ID: ${t}. This may indicate a timing issue or protocol error.`;u(m.JSONRPC_UNKNOWN_RESPONSE_ID,o,{responseId:t},new Error(o));return}if(this.pendingRequests.delete(t),clearTimeout(s.timeout),"result"in e)s.resolve(e.result);else if("error"in e){const o=this.createError(e.error,s.method);s.reject(o)}}handleNotification(e){const{method:t,params:s}=e;if(!t){_("Received notification without method");return}const o=this.notificationHandlers.get(t);!o||o.size===0||o.forEach(c=>{try{const a=c(s??{});a&&typeof a.then=="function"&&a.catch(l=>{u(m.JSONRPC_NOTIFICATION_HANDLER_ERROR,`Error in notification handler for '${t}'`,{error:l instanceof Error?l.message:String(l),method:t})})}catch(a){u(m.JSONRPC_NOTIFICATION_HANDLER_ERROR,`Error in notification handler for '${t}'`,{error:a instanceof Error?a.message:String(a),method:t})}})}createError(e,t){const s=`JSON-RPC Error (${e.code}): ${e.message} [method: ${t}]`;return new v(e.code,e,s)}generateRequestId(){return`req-${Date.now()}-${this.requestIdCounter++}`}clearPendingRequests(){this.pendingRequests.forEach(({timeout:t})=>{clearTimeout(t)});const e=new Error("WebSocket connection closed");this.pendingRequests.forEach(({reject:t})=>{t(e)}),this.pendingRequests.clear()}getPendingRequestCount(){return this.pendingRequests.size}static validateRequest(e){if(typeof e!="object"||e===null)return!1;const t=e;return t.jsonrpc==="2.0"&&typeof t.method=="string"&&(t.id===void 0||typeof t.id=="string"||typeof t.id=="number")}static validateResponse(e){if(typeof e!="object"||e===null)return!1;const t=e;return t.jsonrpc!=="2.0"||t.id===void 0&&t.id!==0?!1:"result"in t&&!("error"in t)||"error"in t&&!("result"in t)}isValidJsonRpcMessage(e){if(typeof e!="object"||e===null)return!1;const t=e;if(t.jsonrpc!=="2.0")return!1;const s="id"in t,o="method"in t,c="result"in t,a="error"in t;return s&&(c||a)?c&&!a||!c&&a:!!(o&&!s)}}const x=new oe;function ae(n,e,t){switch(n){case"executing":return{state:"executing"};case"completed":return{state:"completed",result:e};case"failed":return{state:"failed",error:t||"Unknown error"};default:return console.warn(`[ChatService] Unknown tool status: "${n}", treating as executing`),{state:"executing"}}}class ie{constructor(){d(this,"currentConversationId",null);d(this,"currentRequestId",null);this.setupNotificationHandlers()}setupNotificationHandlers(){x.onNotification("chat.response.chunk",e=>{this.handleResponseChunk(e)}),x.onNotification("chat.tool.invoke",e=>{this.handleToolInvoke(e)}),x.onNotification("chat.thinking",e=>{this.handleThinking(e)}),x.onNotification("chat.usage",e=>{this.handleUsage(e)}),x.onNotification("chat.error",e=>{this.handleError(e)})}async getStatus(){try{const e=await x.sendRequest("chat.status",{}),t={sdkAvailable:e.sdkAvailable??e.sdk_available??!1,sdkVersion:e.sdkVersion??e.sdk_version??null,errorMessage:e.errorMessage??e.error_message??null};return S.getState().setSdkStatus(t),t}catch(e){const t=e instanceof Error?e.message:"Unknown error";u(m.CHAT_GET_STATUS_FAILED,"Failed to get status",{error:t});const s={sdkAvailable:!1,sdkVersion:null,errorMessage:t};throw S.getState().setSdkStatus(s),e}}async sendMessage(e){if(!e.trim())throw new Error("Message cannot be empty");const t=S.getState(),o={id:this.generateMessageId(),role:"user",conversationId:this.currentConversationId||this.generateConversationId(),timestamp:new Date().toISOString(),parts:[{type:"text",content:e,timestamp:new Date().toISOString()}]};this.currentConversationId=o.conversationId,t.setActiveConversationId(this.currentConversationId),t.addMessage(o);const c=this.generateMessageId(),a={id:c,role:"assistant",conversationId:o.conversationId,timestamp:new Date().toISOString(),parts:[],isStreaming:!0};t.addMessage(a),t.setStreaming(!0),t.setError(null);try{this.currentRequestId=this.generateRequestId();const l=await x.sendRequest("chat.send",{message:e},6e4);return t.updateMessage(c,{isStreaming:!1}),t.setStreaming(!1),l}catch(l){t.setStreaming(!1);const h=l instanceof Error?l.message:"Unknown error";throw t.setError(h),u(m.CHAT_SEND_FAILED,"Failed to send message",{error:h,message:e}),t.appendPart(c,{type:"error",code:"SEND_FAILED",message:h,timestamp:new Date().toISOString()}),l}}async cancelMessage(){const e=S.getState();try{const t=await x.sendRequest("chat.cancel",{},5e3);return e.setStreaming(!1),t}catch(t){const s=t instanceof Error?t.message:"Unknown error";throw u(m.CHAT_CANCEL_FAILED,"Failed to cancel",{error:s}),e.setStreaming(!1),t}}handleResponseChunk(e){const t=S.getState(),s=t.getCurrentStreamingMessage();if(!s){_("Received response chunk but no streaming message");return}t.appendTextContent(s.id,e.content)}handleToolInvoke(e){const t=S.getState(),s=t.getCurrentStreamingMessage();if(!s){_("Received tool invoke but no streaming message");return}const o=ae(e.status,e.result,e.error);s.parts.find(a=>a.type==="tool_invocation"&&a.toolUseId===e.tool_use_id)?t.updateToolInvocation(e.tool_use_id,{status:o}):t.appendPart(s.id,{type:"tool_invocation",toolUseId:e.tool_use_id,toolName:e.toolName,toolInput:e.toolInput,status:o,timestamp:e.timestamp||new Date().toISOString()})}handleThinking(e){const t=S.getState(),s=t.getCurrentStreamingMessage();if(!s){_("Received thinking but no streaming message");return}t.appendPart(s.id,{type:"thinking",content:e.content,timestamp:e.timestamp||new Date().toISOString()})}handleUsage(e){const t=S.getState(),s=t.getCurrentStreamingMessage();if(!s){_("Received usage but no streaming message");return}t.appendPart(s.id,{type:"usage",inputTokens:e.input_tokens,outputTokens:e.output_tokens,totalTokens:e.total_tokens,totalCostUsd:e.total_cost_usd,timestamp:e.timestamp||new Date().toISOString()})}handleError(e){const t=S.getState(),s=e.message||"Unknown error";t.setError(s),t.setStreaming(!1);const o=t.getCurrentStreamingMessage();o&&t.appendPart(o.id,{type:"error",code:e.code||"UNKNOWN_ERROR",message:s,timestamp:e.timestamp||new Date().toISOString()})}generateMessageId(){return`msg-${Date.now()}-${Math.random().toString(36).substring(2,11)}`}generateConversationId(){return`conv-${Date.now()}-${Math.random().toString(36).substring(2,11)}`}generateRequestId(){return`req-${Date.now()}-${Math.random().toString(36).substring(2,11)}`}getCurrentConversationId(){return this.currentConversationId}getCurrentRequestId(){return this.currentRequestId}reset(){this.currentConversationId=null,this.currentRequestId=null,S.getState().reset()}}const T=new ie,A=({title:n="DrBot Chat",showCostInfo:e=!0,testId:t="chat-panel"})=>{const[s,o]=b.useState(!1),c=b.useRef(null),{messages:a,activeConversationId:l,isStreaming:h,sdkStatus:f,error:g}=S();b.useEffect(()=>{var w;(w=c.current)==null||w.scrollIntoView({behavior:"smooth"})},[a]);const E=b.useCallback(async w=>{o(!0);try{await T.sendMessage(w)}catch(U){console.error("[ChatPanel] Failed to send message:",U)}finally{o(!1)}},[]),p=b.useCallback(async()=>{try{await T.cancelMessage()}catch(w){console.error("[ChatPanel] Failed to cancel:",w)}},[]),I=f==null?void 0:f.sdkAvailable,P=!!g;return r.jsxs("div",{className:"flex flex-col h-full bg-white dark:bg-gray-800 border rounded-lg","data-testid":t,children:[r.jsxs("div",{className:"px-4 py-3 border-b dark:border-gray-700 flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:n}),l&&r.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Conversation: ",l]})]}),r.jsx("div",{className:"flex items-center gap-2",children:I?r.jsxs("span",{className:"inline-flex items-center gap-1 text-xs text-green-600 dark:text-green-400",children:[r.jsx("span",{className:"inline-block w-2 h-2 bg-green-600 dark:bg-green-400 rounded-full"}),"Ready"]}):r.jsxs("span",{className:"inline-flex items-center gap-1 text-xs text-red-600 dark:text-red-400",children:[r.jsx("span",{className:"inline-block w-2 h-2 bg-red-600 dark:bg-red-400 rounded-full"}),"Unavailable"]})})]}),r.jsx("div",{className:"flex-1 overflow-y-auto px-4 py-4","data-testid":"messages-container",children:a.length===0?r.jsx("div",{className:"h-full flex items-center justify-center text-gray-400 dark:text-gray-500 text-center",children:r.jsxs("div",{children:[r.jsx("p",{className:"text-sm mb-2",children:"Chat"}),r.jsx("p",{children:"No messages yet. Start a conversation!"}),!I&&r.jsx("p",{className:"text-sm mt-2 text-red-600 dark:text-red-400",children:"Chat is not available. Please check SDK status."})]})}):r.jsxs(r.Fragment,{children:[a.map(w=>r.jsx(D,{message:w},w.id)),r.jsx("div",{ref:c})]})}),P&&r.jsx("div",{className:"px-4 py-2 bg-red-50 dark:bg-red-900 border-t border-red-200 dark:border-red-700",children:r.jsxs("p",{className:"text-sm text-red-800 dark:text-red-200",children:[r.jsx("span",{className:"font-semibold",children:"Error:"})," ",g]})}),r.jsx(X,{onSendMessage:E,onCancel:p,isStreaming:h,isSending:s,sdkStatus:f}),e&&a.length>0&&r.jsx("div",{className:"px-4 py-2 bg-gray-50 dark:bg-gray-900 border-t dark:border-gray-700 text-xs text-gray-600 dark:text-gray-400",children:r.jsx("p",{children:"All costs are estimates based on Anthropic API pricing."})})]})};A.displayName="ChatPanel";const ce=b.memo(A);A.__docgenInfo={description:"",methods:[],displayName:"ChatPanel",props:{title:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:"'DrBot Chat'",computed:!1}},showCostInfo:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"true",computed:!1}},testId:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:"'chat-panel'",computed:!1}}}};class R extends $.Component{constructor(t){super(t);d(this,"handleReset",()=>{this.setState({hasError:!1,error:null})});this.state={hasError:!1,error:null}}static getDerivedStateFromError(t){return{hasError:!0,error:t}}componentDidCatch(t,s){console.error("[ChatPanelErrorBoundary] Caught error:",t),console.error("[ChatPanelErrorBoundary] Error info:",s)}render(){return this.state.hasError?r.jsx("div",{className:"flex flex-col h-full bg-white dark:bg-gray-800 border rounded-lg p-6","data-testid":"chat-panel-error-boundary",role:"alert",children:r.jsx("div",{className:"flex-1 flex flex-col items-center justify-center",children:r.jsxs("div",{className:"max-w-md text-center",children:[r.jsx("div",{className:"mb-4 inline-flex items-center justify-center w-12 h-12 rounded-full bg-red-100 dark:bg-red-900/30",children:r.jsx("svg",{className:"w-6 h-6 text-red-600 dark:text-red-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4v2m0 0a9 9 0 11-9-9 9 9 0 019 9z"})})}),r.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-2",children:"Chat Error"}),r.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-4",children:"An error occurred in the chat component. Please try refreshing the page or clearing your browser cache."}),this.state.error&&r.jsxs("details",{className:"mt-4 mb-4 text-left",children:[r.jsx("summary",{className:"cursor-pointer text-xs font-semibold text-gray-700 dark:text-gray-300 hover:text-gray-900 dark:hover:text-gray-100 mb-2",children:"Error Details"}),r.jsxs("div",{className:"mt-2 p-3 bg-gray-100 dark:bg-gray-900 rounded text-xs font-mono text-gray-800 dark:text-gray-200 overflow-auto max-h-32",children:[r.jsx("p",{className:"break-words mb-2",children:this.state.error.toString()}),this.state.error.stack&&r.jsx("pre",{className:"break-words text-xs",children:this.state.error.stack})]})]}),r.jsxs("div",{className:"flex gap-3 justify-center",children:[r.jsx("button",{onClick:this.handleReset,className:"px-4 py-2 bg-red-600 hover:bg-red-700 dark:bg-red-700 dark:hover:bg-red-600 text-white text-sm font-medium rounded transition-colors","data-testid":"chat-error-reset-button",children:"Try Again"}),r.jsx("button",{onClick:()=>window.location.reload(),className:"px-4 py-2 bg-gray-600 hover:bg-gray-700 dark:bg-gray-700 dark:hover:bg-gray-600 text-white text-sm font-medium rounded transition-colors","data-testid":"chat-error-reload-button",children:"Reload Page"})]}),r.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-4",children:"If the problem persists, please check the browser console for more details or contact support."})]})})}):this.props.children}}d(R,"displayName","ChatPanelErrorBoundary");R.__docgenInfo={description:`ChatPanelErrorBoundary Component

Catches React rendering errors in ChatPanel and its sub-components.
Prevents a single chat error from crashing the entire application.

Handles errors from:
- ChatPanel message rendering
- ChatMessage component errors
- ChatInput component errors
- Child component initialization failures

Usage:
\`\`\`tsx
<ChatPanelErrorBoundary>
  <ChatPanelContainer />
</ChatPanelErrorBoundary>
\`\`\``,methods:[],displayName:"ChatPanelErrorBoundary",props:{children:{required:!0,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:""}}};const le=0,N=1,de=2,he=3;class L{constructor(e,t=null){d(this,"ws",null);d(this,"url");d(this,"token",null);d(this,"reconnectAttempts",0);d(this,"maxReconnectAttempts",10);d(this,"reconnectDelay",1e3);d(this,"maxReconnectDelay",3e4);d(this,"reconnectTimer",null);d(this,"heartbeatTimer",null);d(this,"heartbeatInterval",3e4);d(this,"eventHandlers",new Map);d(this,"isIntentionallyClosed",!1);d(this,"subscribedTopics",[]);d(this,"mode","detecting");d(this,"connectionTimeout",null);d(this,"maxConnectionAttempts",3);d(this,"connectionErrors",[]);this.url=e,this.token=t}setToken(e){this.token=e,console.log("[WebSocket] Token updated:",e?"present":"cleared")}getAuthProtocols(){if(this.token)return["token",this.token]}connect(){if(this.ws&&this.ws.readyState===N){console.log("[WebSocket] Already connected");return}if(this.mode==="rest"){console.log("[WebSocket] Using REST mode, skipping WebSocket connection"),this.emit("rest-mode",{});return}this.isIntentionallyClosed=!1,this.mode==="detecting"&&console.log(`[WebSocket] Attempting WebSocket connection (attempt ${this.reconnectAttempts+1}/${this.maxConnectionAttempts})...`);try{const e=this.getAuthProtocols();this.ws=new WebSocket(this.url,e),this.ws.onopen=this.handleOpen.bind(this),this.ws.onmessage=this.handleMessage.bind(this),this.ws.onerror=this.handleError.bind(this),this.ws.onclose=this.handleClose.bind(this),this.mode==="detecting"&&(this.connectionTimeout=setTimeout(()=>{this.ws&&this.ws.readyState!==N&&(console.log("[WebSocket] Connection timeout during detection phase"),this.ws.close())},3e3))}catch(e){this.mode==="detecting"?(console.debug("[WebSocket] Connection error during detection:",e),this.handleConnectionFailure(),this.connectionErrors.push(e instanceof Error?e:new Error(String(e)))):(u(m.WS_CONNECTION_ERROR,"WebSocket connection error",{error:e instanceof Error?e.message:String(e)}),this.scheduleReconnect())}}getConnectionErrors(){return[...this.connectionErrors]}isTestEnvironment(){return k()}triggerCloseForTesting(){this.isTestEnvironment()&&(this.ws&&this.ws.readyState===N?(console.log("[WebSocket] TEST: Forcing close event"),this.ws.close(1e3,"Test-triggered close")):console.warn("[WebSocket] TEST: Cannot close, not connected"))}simulateMaxReconnectAttemptsForTesting(){this.isTestEnvironment()&&(console.log("[WebSocket] TEST: Simulating max reconnect attempts"),this.reconnectAttempts=this.maxReconnectAttempts,u(m.WS_MAX_RECONNECT_ATTEMPTS,"Max reconnection attempts reached (TEST SIMULATION)",{attempts:this.reconnectAttempts}),this.emit("max-reconnect-attempts",{attempts:this.reconnectAttempts}))}disconnect(){this.isIntentionallyClosed=!0,this.stopHeartbeat(),this.cancelReconnect(),this.ws&&(this.ws.close(),this.ws=null),console.log("[WebSocket] Disconnected"),this.emit("disconnect",{})}subscribe(e){this.subscribedTopics=e,this.ws&&this.ws.readyState===N&&this.send({type:"subscribe",topics:e})}send(e){var t;if(this.ws&&this.ws.readyState===N)try{return this.ws.send(JSON.stringify(e)),!0}catch(s){return u(m.WS_SEND_FAILED,"Failed to send WebSocket message",{error:s instanceof Error?s.message:String(s),message:e}),!1}else return u(m.WS_NOT_CONNECTED,"Cannot send message, WebSocket not connected",{connectionState:(t=this.ws)==null?void 0:t.readyState,message:e}),!1}on(e,t){this.eventHandlers.has(e)||this.eventHandlers.set(e,new Set),this.eventHandlers.get(e).add(t)}off(e,t){const s=this.eventHandlers.get(e);s&&s.delete(t)}get isConnected(){return this.ws!==null&&this.ws.readyState===N}get connectionState(){if(!this.ws)return this.reconnectTimer?"reconnecting":"disconnected";switch(this.ws.readyState){case le:return"connecting";case N:return"connected";case de:case he:return this.reconnectTimer?"reconnecting":"disconnected";default:return"disconnected"}}get transportMode(){return this.mode}handleConnectionFailure(){this.reconnectAttempts++,this.reconnectAttempts>=this.maxConnectionAttempts?(console.log("[WebSocket] Server does not support WebSocket, using REST mode"),this.connectionErrors.length>0&&(console.warn("[WebSocket] Connection attempts failed with the following errors:"),this.connectionErrors.forEach((e,t)=>{console.warn(`  [${t+1}] ${e.message}`)})),this.mode="rest",this.reconnectAttempts=0,this.emit("rest-mode",{}),this.emit("connect",{})):setTimeout(()=>this.connect(),500)}handleOpen(){this.connectionTimeout&&(clearTimeout(this.connectionTimeout),this.connectionTimeout=null),console.log("[WebSocket] Connected successfully"),this.mode="websocket",this.reconnectAttempts=0,this.reconnectDelay=1e3,this.startHeartbeat(),this.emit("connect",{}),this.subscribedTopics.length>0&&this.subscribe(this.subscribedTopics)}handleMessage(e){try{const t=JSON.parse(e.data),s=t.type??"message";console.log("[WebSocket] Received:",s),this.emit(s,t),this.emit("message",t)}catch(t){u(m.WS_MESSAGE_PARSE_FAILED,"Failed to parse WebSocket message",{error:t instanceof Error?t.message:String(t),data:e.data})}}handleError(e){const t=k();if(this.mode==="detecting"){const s=e instanceof ErrorEvent?e.message:String(e);this.connectionErrors.push(new Error(`[Attempt ${this.reconnectAttempts+1}/${this.maxConnectionAttempts}] ${s}`)),console.debug("[WebSocket] Connection error during detection (attempt %d/%d): %s",this.reconnectAttempts+1,this.maxConnectionAttempts,s)}else t?console.debug("[WebSocket] Error in test environment:",e):u(m.WS_ERROR_EVENT,"WebSocket error event",{error:e instanceof ErrorEvent?e.message:String(e)});this.emit("error",{kind:"event",error:e})}handleClose(e){if(this.connectionTimeout&&(clearTimeout(this.connectionTimeout),this.connectionTimeout=null),this.mode==="detecting"){this.handleConnectionFailure();return}console.log(`[WebSocket] Closed (code: ${e.code}, reason: ${e.reason})`),this.stopHeartbeat(),this.emit("close",{code:e.code,reason:e.reason}),!this.isIntentionallyClosed&&this.mode!=="rest"&&this.scheduleReconnect()}scheduleReconnect(){if(this.isIntentionallyClosed)return;if(this.reconnectAttempts>=this.maxReconnectAttempts){u(m.WS_MAX_RECONNECT_ATTEMPTS,"Max reconnection attempts reached",{attempts:this.reconnectAttempts}),this.emit("max-reconnect-attempts",{attempts:this.reconnectAttempts});return}this.reconnectAttempts++;const e=Math.min(this.reconnectDelay*Math.pow(2,this.reconnectAttempts-1),this.maxReconnectDelay);console.log(`[WebSocket] Reconnecting in ${e}ms (attempt ${this.reconnectAttempts}/${this.maxReconnectAttempts})`),this.emit("reconnecting",{attempt:this.reconnectAttempts,delay:e}),this.reconnectTimer=setTimeout(()=>{this.reconnectTimer=null,this.connect()},e)}cancelReconnect(){this.reconnectTimer&&(clearTimeout(this.reconnectTimer),this.reconnectTimer=null)}startHeartbeat(){this.stopHeartbeat(),this.heartbeatTimer=setInterval(()=>{this.ws&&this.ws.readyState===N&&this.send({type:"ping"})},this.heartbeatInterval)}stopHeartbeat(){this.heartbeatTimer&&(clearInterval(this.heartbeatTimer),this.heartbeatTimer=null)}emit(e,t){const s=this.eventHandlers.get(e);s&&s.forEach(o=>{try{o(t)}catch(c){u(m.WS_EVENT_HANDLER_ERROR,`Error in WebSocket event handler for '${e}'`,{error:c instanceof Error?c.message:String(c),event:e})}})}}function k(){return typeof window>"u"?!1:!!(window.__PLAYWRIGHT__||window.__STORYBOOK_MOCK_WEBSOCKET__||window.__karma__||window.jasmine||window.jest)}let y;if(typeof window<"u"){const e=`${window.location.protocol==="https:"?"wss:":"ws:"}//${window.location.host}/ws`;y=new L(e,null)}else{const n=new Map;y={setToken:()=>{},connect:()=>{setTimeout(()=>{const e=n.get("error");e&&e.forEach(s=>s({code:"SSR_ENVIRONMENT",message:"WebSocket not available in SSR/Node.js environment"}));const t=n.get("rest-mode");t&&t.forEach(s=>s({}))},0)},disconnect:()=>{},subscribe:()=>{},send:()=>(u(m.WS_SEND_FAILED,"Cannot send message in SSR/Node.js environment - use REST API instead",{environment:"SSR/Node.js"}),!1),on:(e,t)=>{n.has(e)||n.set(e,new Set),n.get(e).add(t)},off:(e,t)=>{const s=n.get(e);s&&s.delete(t)},get isConnected(){return!1},get connectionState(){return"disconnected"},get transportMode(){return"rest"}}}typeof window<"u"&&k()&&(window.__WEBSOCKET_CLIENT__=y);const ue=Object.freeze(Object.defineProperty({__proto__:null,WebSocketClient:L,get websocketClient(){return y}},Symbol.toStringTag,{value:"Module"})),M=({title:n="DrBot Chat",showCostInfo:e=!0,testId:t="chat-panel-container"})=>{const[s,o]=b.useState(!0),[c,a]=b.useState(null),{setSdkStatus:l,setError:h}=S();return b.useEffect(()=>{(async()=>{try{o(!0),a(null);const p=await T.getStatus();l(p),p.sdkAvailable||a(p.errorMessage||"Chat SDK is not available")}catch(p){const I=p instanceof Error?p.message:"Failed to initialize chat";console.error("[ChatPanelContainer] Initialization error:",p),a(I),h(I)}finally{o(!1)}})();const g=()=>{T.getStatus().catch(p=>{console.error("[ChatPanelContainer] Status check failed after reconnect:",p)})},E=()=>{h("Connection lost. Reconnecting...")};return y.on("connect",g),y.on("disconnect",E),()=>{y.off("connect",g),y.off("disconnect",E)}},[l,h]),s?r.jsx("div",{className:"flex flex-col h-full bg-white dark:bg-gray-800 border rounded-lg","data-testid":t,children:r.jsx("div",{className:"flex-1 flex items-center justify-center",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border border-gray-300 border-t-blue-600 dark:border-gray-600 dark:border-t-blue-400 mb-2"}),r.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Initializing chat..."})]})})}):c?r.jsx("div",{className:"flex flex-col h-full bg-white dark:bg-gray-800 border rounded-lg","data-testid":t,children:r.jsx("div",{className:"flex-1 flex items-center justify-center p-6",children:r.jsx("div",{className:"max-w-md w-full",children:r.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4",children:r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx("div",{className:"flex-shrink-0",children:r.jsx("svg",{className:"w-5 h-5 text-red-600 dark:text-red-400",fill:"currentColor",viewBox:"0 0 20 20",children:r.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),r.jsxs("div",{className:"flex-1",children:[r.jsx("h3",{className:"text-sm font-semibold text-red-800 dark:text-red-200 mb-1",children:"Chat Unavailable"}),r.jsx("p",{className:"text-sm text-red-700 dark:text-red-300",children:c})]})]})})})})}):r.jsx(R,{children:r.jsx(ce,{title:n,showCostInfo:e,testId:t})})};M.displayName="ChatPanelContainer";b.memo(M);M.__docgenInfo={description:"",methods:[],displayName:"ChatPanelContainer",props:{title:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:"'DrBot Chat'",computed:!1}},showCostInfo:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"true",computed:!1}},testId:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:"'chat-panel-container'",computed:!1}}}};const D=b.memo(({message:n})=>{const e=n.role==="user",t=n.role==="assistant",s=(o,c)=>{switch(o.type){case"text":return r.jsx(H,{content:o.content,isStreaming:!1},c);case"tool_invocation":const a=o;return r.jsx(J,{toolName:a.toolName,toolInput:a.toolInput||{},toolOutput:a.status.state==="completed"&&typeof a.status.result=="string"?a.status.result:a.status.state==="completed"&&a.status.result?JSON.stringify(a.status.result):void 0,status:a.status,timestamp:a.timestamp,duration:void 0},c);case"thinking":return r.jsx(G,{content:o.content,isStreaming:!1,defaultExpanded:!1},c);case"usage":const l=o;return r.jsx(B,{inputTokens:l.inputTokens||0,outputTokens:l.outputTokens||0,totalTokens:l.totalTokens,totalCostUsd:l.totalCostUsd},c);case"error":const h=o;return r.jsxs("div",{className:"bg-red-50 dark:bg-red-900 border border-red-200 dark:border-red-700 rounded p-2 text-sm my-2 text-red-800 dark:text-red-200","data-testid":"error-message",children:["[Error] ",h.message]},c);default:return null}};return r.jsxs("div",{className:`mb-4 flex gap-3 ${e?"justify-end":"justify-start"}`,"data-testid":`message-${n.id}`,children:[!e&&r.jsx("div",{className:"flex-shrink-0",children:r.jsx("div",{className:"w-8 h-8 rounded-full bg-purple-100 dark:bg-purple-900 flex items-center justify-center",children:r.jsx(z,{className:"w-5 h-5 text-purple-600 dark:text-purple-300"})})}),r.jsxs("div",{className:`flex-1 max-w-2xl rounded-lg p-4 ${e?"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800":"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700"}`,children:[r.jsx("div",{className:"text-xs font-semibold text-gray-500 dark:text-gray-400 mb-2",children:e?"You":"Assistant"}),n.parts.length===0&&t&&n.isStreaming?r.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-700 dark:text-gray-300",children:[r.jsx("span",{className:"inline-block w-2 h-2 bg-current rounded-full animate-pulse"}),"Thinking..."]}):r.jsxs("div",{className:"space-y-2",children:[n.parts.map((o,c)=>s(o,c)),n.isStreaming&&n.parts.length>0&&r.jsxs("div",{className:"mt-2 text-xs opacity-75 flex items-center gap-1",children:[r.jsx("span",{className:"inline-block w-2 h-2 bg-current rounded-full animate-pulse"}),"Streaming..."]})]})]}),e&&r.jsx("div",{className:"flex-shrink-0",children:r.jsx("div",{className:"w-8 h-8 rounded-full bg-blue-100 dark:bg-blue-900 flex items-center justify-center",children:r.jsx(Q,{className:"w-5 h-5 text-blue-600 dark:text-blue-300"})})})]})});D.displayName="ChatMessage";D.__docgenInfo={description:"",methods:[],displayName:"ChatMessage",props:{message:{required:!0,tsType:{name:"ChatMessageType"},description:""}}};export{D as C,ce as a};
